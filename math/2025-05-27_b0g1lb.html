<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>小学3年生算数テスト 第1セット</title>
  <style>
    body {
      font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
      background: #f4f6fb;
      margin: 0;
      padding: 0;
      color: #333;
    }

    .container {
      max-width: 800px;
      margin: auto;
      padding: 20px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
      margin-top: 40px;
    }

    h1 {
      font-size: 26px;
      text-align: center;
      color: #2c3e50;
      margin-bottom: 30px;
    }

    .question {
      margin-bottom: 28px;
      padding: 20px;
      border-radius: 12px;
      background: #f8faff;
      border: 1px solid #dde3ef;
    }

    .question-title {
      font-weight: 600;
      font-size: 18px;
      margin-bottom: 12px;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .option-label {
      display: flex;
      align-items: center;
      border: 2px solid transparent;
      border-radius: 10px;
      background: #eef2f9;
      padding: 10px 14px;
      cursor: pointer;
      transition: 0.3s ease;
    }

    .option-label:hover {
      background: #dbe7ff;
    }

    .option-label input[type="radio"] {
      display: none;
    }

    .option-label.selected {
      background-color: #cce4ff !important;
      border-color: #3390ff;
    }

    .opt-prefix {
      font-weight: bold;
      margin-right: 8px;
      color: #333;
    }

    .opt-content {
      font-size: 16px;
    }

    button {
      margin-top: 30px;
      display: block;
      width: 100%;
      background: #3390ff;
      color: white;
      border: none;
      padding: 14px;
      border-radius: 10px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    button:hover {
      background: #2273d6;
    }

    #result {
      font-size: 20px;
      font-weight: bold;
      margin-top: 30px;
      text-align: center;
      color: #2e8b57;
    }

    .feedback {
      margin-top: 10px;
    }

    .incorrect {
      background-color: #ffe8e8;
      border: 2px solid #ff4d4f;
      border-radius: 6px;
      padding: 4px 8px;
      display: inline-block;
    }

    #score-popup {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #ffffff;
      padding: 20px;
      border: 1px solid #ccd;
      font-size: 16px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      z-index: 999;
      width: 340px;
      font-family: 'Segoe UI', sans-serif;
    }

    #score-popup h4 {
      margin: 0;
      font-size: 18px;
      color: #003366;
    }

    #score-popup button {
      background-color: #ccc;
      color: #333;
      border: none;
      border-radius: 6px;
      padding: 4px 10px;
      cursor: pointer;
      font-weight: bold;
      font-size: 14px;
    }

    @media (max-width: 600px) {
      .container {
        margin-top: 20px;
        padding: 16px;
      }

      #score-popup {
        width: 90%;
        left: 5%;
        right: auto;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>小学3年生算数テスト 第1セット</h1>
    <form id="quizForm">
      
      <div class="question">
        <div class="question-title">1. 784 の十の位の数字は何ですか。</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q1" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">5</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q1" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">8</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q1" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">7</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q1" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">6</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">2. 次の計算をしなさい: 2 × (28 ÷ 9) = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q2" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">3</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q2" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">9</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q2" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">6</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q2" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">8</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">3. 商とあまりを求めなさい: 61 ÷ 5 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q3" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">10余り1</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q3" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">11余り4</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q3" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">14余り3</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q3" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">12余り1</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">4. 3 m は何 cm ですか。</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q4" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">300</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q4" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">350</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q4" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">250</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q4" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">280</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">5. 縦7cm、横10cm の長方形の面積は？</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q5" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">65</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q5" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">70</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q5" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">75</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q5" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">60</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">6. 次の計算をしなさい: 252 + 507 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q6" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">748</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q6" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">776</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q6" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">765</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q6" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">759</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">7. 次の計算をしなさい: 238 × 6 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q7" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">1458</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q7" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">1428</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q7" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">1408</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q7" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">1478</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">8. 商とあまりを求めなさい: 289 ÷ 8 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q8" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">37余り6</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q8" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">38余り7</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q8" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">36余り1</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q8" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">37余り4</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">9. 次の計算をしなさい: 9 × 9 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q9" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">77</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q9" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">81</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q9" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">71</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q9" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">91</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">10. 次の計算をしなさい: 860 - 298 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q10" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">553</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q10" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">562</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q10" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">582</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q10" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">550</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">11. 4 L 777 mL を mL で表すと？</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q11" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">4577</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q11" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">4777</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q11" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">4977</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q11" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">4677</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">12. 次の計算をしなさい: 9 × 6 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q12" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">55</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q12" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">54</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q12" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">57</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q12" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">62</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">13. 次の計算をしなさい: 114 ÷ 3 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q13" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">43</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q13" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">36</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q13" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">38</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q13" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">41</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">14. 500円玉を7枚集めると、合計はいくらですか。</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q14" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">3500円</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q14" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">3400円</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q14" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">3450円</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q14" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">3600円</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">15. 8時50分 の 45分後 は何時何分ですか。</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q15" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">9時45分</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q15" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">9時30分</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q15" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">9時35分</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q15" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">9時40分</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">16. 次の計算をしなさい: 9 × (23 ÷ 8) = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q16" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">18</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q16" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">21</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q16" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">20</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q16" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">16</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">17. 4 L 389 mL を mL で表すと？</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q17" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">4389</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q17" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">4489</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q17" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">4589</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q17" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">4289</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">18. 8 m は何 cm ですか。</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q18" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">750</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q18" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">850</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q18" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">800</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q18" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">820</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">19. 3時間17分 は何分ですか。</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q19" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">187</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q19" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">197</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q19" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">212</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q19" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">207</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">20. 4 m は何 cm ですか。</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q20" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">380</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q20" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">400</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q20" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">420</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q20" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">350</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">21. 50円玉を9枚集めると、合計はいくらですか。</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q21" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">450円</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q21" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">500円</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q21" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">400円</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q21" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">550円</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">22. 次の計算をしなさい: 275 × 9 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q22" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">2445</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q22" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">2455</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q22" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">2425</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q22" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">2475</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">23. 縦6cm、横7cm の長方形の面積は？</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q23" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">52</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q23" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">42</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q23" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">32</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q23" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">47</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">24. 1 L 371 mL を mL で表すと？</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q24" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">1371</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q24" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">1171</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q24" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">1471</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q24" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">1271</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">25. 次の計算をしなさい: 88 ÷ 8 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q25" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">13</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q25" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">11</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q25" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">14</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q25" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">16</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">26. 2 L 269 mL を mL で表すと？</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q26" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">2469</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q26" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">2069</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q26" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">2269</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q26" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">2169</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">27. 6時20分 の 40分後 は何時何分ですか。</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q27" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">6時50分</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q27" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">7時10分</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q27" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">6時55分</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q27" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">7時00分</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">28. 次の計算をしなさい: 949 × 8 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q28" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">7572</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q28" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">7592</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q28" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">7542</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q28" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">7612</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">29. 一辺が20cm の正方形の周の長さは？</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q29" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">84</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q29" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">76</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q29" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">80</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q29" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">72</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">30. 3 L 877 mL を mL で表すと？</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q30" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">3677</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q30" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">3777</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q30" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">3977</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q30" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">3877</span>
          </label>
          
        </div>
      </div>
      
      <button type="button" onclick="gradeQuiz()">提出する</button>
    </form>
    <div id="result"></div>
  </div>

  <div id="score-popup">
    <div style="display:flex; justify-content: space-between; align-items: center;">
      <h4>過去の成績</h4>
      <button onclick="this.parentNode.parentNode.remove()">✖</button>
    </div>
    <hr style="margin:10px 0; border:none; border-top:1px solid #ccc">
    <div id="score-log" style="line-height:1.6">読み込み中...</div>
  </div>

  <script>
  const answers = [
    
    { num: 1, answer: 'B', correct: `8`, question: `784 の十の位の数字は何ですか。` },
    
    { num: 2, answer: 'C', correct: `6`, question: `次の計算をしなさい: 2 × (28 ÷ 9) = ?` },
    
    { num: 3, answer: 'D', correct: `12余り1`, question: `商とあまりを求めなさい: 61 ÷ 5 = ?` },
    
    { num: 4, answer: 'A', correct: `300`, question: `3 m は何 cm ですか。` },
    
    { num: 5, answer: 'B', correct: `70`, question: `縦7cm、横10cm の長方形の面積は？` },
    
    { num: 6, answer: 'D', correct: `759`, question: `次の計算をしなさい: 252 + 507 = ?` },
    
    { num: 7, answer: 'B', correct: `1428`, question: `次の計算をしなさい: 238 × 6 = ?` },
    
    { num: 8, answer: 'C', correct: `36余り1`, question: `商とあまりを求めなさい: 289 ÷ 8 = ?` },
    
    { num: 9, answer: 'B', correct: `81`, question: `次の計算をしなさい: 9 × 9 = ?` },
    
    { num: 10, answer: 'B', correct: `562`, question: `次の計算をしなさい: 860 - 298 = ?` },
    
    { num: 11, answer: 'B', correct: `4777`, question: `4 L 777 mL を mL で表すと？` },
    
    { num: 12, answer: 'B', correct: `54`, question: `次の計算をしなさい: 9 × 6 = ?` },
    
    { num: 13, answer: 'C', correct: `38`, question: `次の計算をしなさい: 114 ÷ 3 = ?` },
    
    { num: 14, answer: 'A', correct: `3500円`, question: `500円玉を7枚集めると、合計はいくらですか。` },
    
    { num: 15, answer: 'C', correct: `9時35分`, question: `8時50分 の 45分後 は何時何分ですか。` },
    
    { num: 16, answer: 'A', correct: `18`, question: `次の計算をしなさい: 9 × (23 ÷ 8) = ?` },
    
    { num: 17, answer: 'A', correct: `4389`, question: `4 L 389 mL を mL で表すと？` },
    
    { num: 18, answer: 'C', correct: `800`, question: `8 m は何 cm ですか。` },
    
    { num: 19, answer: 'B', correct: `197`, question: `3時間17分 は何分ですか。` },
    
    { num: 20, answer: 'B', correct: `400`, question: `4 m は何 cm ですか。` },
    
    { num: 21, answer: 'A', correct: `450円`, question: `50円玉を9枚集めると、合計はいくらですか。` },
    
    { num: 22, answer: 'D', correct: `2475`, question: `次の計算をしなさい: 275 × 9 = ?` },
    
    { num: 23, answer: 'B', correct: `42`, question: `縦6cm、横7cm の長方形の面積は？` },
    
    { num: 24, answer: 'A', correct: `1371`, question: `1 L 371 mL を mL で表すと？` },
    
    { num: 25, answer: 'B', correct: `11`, question: `次の計算をしなさい: 88 ÷ 8 = ?` },
    
    { num: 26, answer: 'C', correct: `2269`, question: `2 L 269 mL を mL で表すと？` },
    
    { num: 27, answer: 'D', correct: `7時00分`, question: `6時20分 の 40分後 は何時何分ですか。` },
    
    { num: 28, answer: 'B', correct: `7592`, question: `次の計算をしなさい: 949 × 8 = ?` },
    
    { num: 29, answer: 'C', correct: `80`, question: `一辺が20cm の正方形の周の長さは？` },
    
    { num: 30, answer: 'D', correct: `3877`, question: `3 L 877 mL を mL で表すと？` },
    
  ];

  function gradeQuiz() {
    let score = 0;
    const wrongAnswers = [];

    document.querySelectorAll(".feedback").forEach(el => el.remove());

    answers.forEach(a => {
      const questionDiv = document.querySelectorAll(".question")[a.num - 1];
      const selectedInput = document.querySelector(`input[name='q${a.num}']:checked`);
      const allOptions = questionDiv.querySelectorAll("label.option-label");

      allOptions.forEach(label => label.classList.remove("selected"));

      const optionTexts = Array.from(
        questionDiv.querySelectorAll("label.option-label .opt-content")
      ).map(el => el.innerText);

      if (selectedInput) {
        const selectedLabel = selectedInput.closest("label");
        selectedLabel.classList.add("selected");

        const selectedLetter = selectedInput.value;
        const selectedText = selectedLabel.querySelector(".opt-content")?.innerText || "未選択";

        if (selectedLetter === a.answer) {
          score++;
        } else {
          const fb = document.createElement("div");
          fb.className = "feedback";
          fb.innerHTML = `正解は：<span class='incorrect'>${a.answer}. ${a.correct}</span>`;
          questionDiv.appendChild(fb);

          wrongAnswers.push({
            q: a.question,
            correct: a.correct,
            options: optionTexts,
            wrong_answer: selectedText,
            date: new Date().toISOString()
          });
        }
      } else {
        // No selection
        const fb = document.createElement("div");
        fb.className = "feedback";
        fb.innerHTML = `正解は：<span class='incorrect'>${a.answer}. ${a.correct}</span>`;
        questionDiv.appendChild(fb);

        wrongAnswers.push({
          q: a.question,
          correct: a.correct,
          options: optionTexts,
          wrong_answer: "未選択",
          date: new Date().toISOString()
        });
      }
    });

    document.getElementById("result").innerText = `あなたの得点：${score} / ${answers.length}`;

    // Save score
    const key = location.pathname.split('/').pop() || 'default';
    const scoreStorageURL = 'https://kvdb.io/FrFWQafq3LwK1bVEhs4ER6/' + key;
    const scoreEntry = {
      score: `${score} / ${answers.length}`,
      timestamp: new Date().toISOString()
    };
    fetch(scoreStorageURL)
      .then(r => r.ok ? r.text() : "[]")
      .then(t => {
        let data = [];
        try { data = JSON.parse(t); if (!Array.isArray(data)) data = []; } catch (e) { data = []; }
        data.push(scoreEntry);
        return fetch(scoreStorageURL, {
          method: "PUT",
          body: JSON.stringify(data)
        });
      });

    // Save wrong questions in quiz-compatible format
    if (wrongAnswers.length > 0) {
      const wrongURL = "https://kvdb.io/WitRtAw6rrzZQtarR3gDoW/" + key + "_wrong";
      fetch(wrongURL)
        .then(r => r.ok ? r.text() : "[]")
        .then(t => {
          let data = [];
          try { data = JSON.parse(t); if (!Array.isArray(data)) data = []; } catch (e) { data = []; }
          data.push(...wrongAnswers);
          return fetch(wrongURL, {
            method: "PUT",
            body: JSON.stringify(data)
          });
        });
    }
  }

  // Style selection on load
  window.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll(".options").forEach(group => {
      group.querySelectorAll("input[type='radio']").forEach(input => {
        input.addEventListener("change", () => {
          group.querySelectorAll("label.option-label").forEach(label => {
            label.classList.remove("selected");
          });
          input.closest("label").classList.add("selected");
        });
      });
    });

    // Load past scores
    const key = location.pathname.split('/').pop() || 'default';
    const storageURL = 'https://kvdb.io/FrFWQafq3LwK1bVEhs4ER6/' + key;
    fetch(storageURL)
      .then(res => res.text())
      .then(t => {
        let entries = JSON.parse(t);
        if (!Array.isArray(entries)) entries = [entries];
        const sorted = entries.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
        const log = document.getElementById("score-log");
        log.innerHTML = `<table style="width:100%; border-collapse: collapse;">
          ${sorted.map(e => `
            <tr><td style="padding:6px 4px;"><strong>得点</strong></td><td style="padding:6px 4px;">${e.score}</td></tr>
            <tr><td style="padding:6px 4px;"><strong>時刻</strong></td><td style="padding:6px 4px;">${new Date(e.timestamp).toLocaleString()}</td></tr>
            <tr><td colspan="2"><hr style='border:none;border-top:1px solid #ddd;'></td></tr>
          `).join("")}
        </table>`;
      })
      .catch(() => {
        document.getElementById("score-log").innerText = "記録なし";
      });
  });
</script>


</body>
</html>