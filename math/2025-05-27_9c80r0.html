<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>小学3年生算数テスト 第3セット</title>
  <style>
    body {
      font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
      background: #f4f6fb;
      margin: 0;
      padding: 0;
      color: #333;
    }

    .container {
      max-width: 800px;
      margin: auto;
      padding: 20px;
      background: white;
      border-radius: 16px;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
      margin-top: 40px;
    }

    h1 {
      font-size: 26px;
      text-align: center;
      color: #2c3e50;
      margin-bottom: 30px;
    }

    .question {
      margin-bottom: 28px;
      padding: 20px;
      border-radius: 12px;
      background: #f8faff;
      border: 1px solid #dde3ef;
    }

    .question-title {
      font-weight: 600;
      font-size: 18px;
      margin-bottom: 12px;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .option-label {
      display: flex;
      align-items: center;
      border: 2px solid transparent;
      border-radius: 10px;
      background: #eef2f9;
      padding: 10px 14px;
      cursor: pointer;
      transition: 0.3s ease;
    }

    .option-label:hover {
      background: #dbe7ff;
    }

    .option-label input[type="radio"] {
      display: none;
    }

    .option-label.selected {
      background-color: #cce4ff !important;
      border-color: #3390ff;
    }

    .opt-prefix {
      font-weight: bold;
      margin-right: 8px;
      color: #333;
    }

    .opt-content {
      font-size: 16px;
    }

    button {
      margin-top: 30px;
      display: block;
      width: 100%;
      background: #3390ff;
      color: white;
      border: none;
      padding: 14px;
      border-radius: 10px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    button:hover {
      background: #2273d6;
    }

    #result {
      font-size: 20px;
      font-weight: bold;
      margin-top: 30px;
      text-align: center;
      color: #2e8b57;
    }

    .feedback {
      margin-top: 10px;
    }

    .incorrect {
      background-color: #ffe8e8;
      border: 2px solid #ff4d4f;
      border-radius: 6px;
      padding: 4px 8px;
      display: inline-block;
    }

    #score-popup {
      position: fixed;
      top: 20px;
      right: 20px;
      background: #ffffff;
      padding: 20px;
      border: 1px solid #ccd;
      font-size: 16px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      z-index: 999;
      width: 340px;
      font-family: 'Segoe UI', sans-serif;
    }

    #score-popup h4 {
      margin: 0;
      font-size: 18px;
      color: #003366;
    }

    #score-popup button {
      background-color: #ccc;
      color: #333;
      border: none;
      border-radius: 6px;
      padding: 4px 10px;
      cursor: pointer;
      font-weight: bold;
      font-size: 14px;
    }

    @media (max-width: 600px) {
      .container {
        margin-top: 20px;
        padding: 16px;
      }

      #score-popup {
        width: 90%;
        left: 5%;
        right: auto;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>小学3年生算数テスト 第3セット</h1>
    <form id="quizForm">
      
      <div class="question">
        <div class="question-title">1. 商とあまりを求めなさい: 255 ÷ 8 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q1" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">29余り3</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q1" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">30余り4</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q1" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">31余り7</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q1" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">29余り0</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">2. 一辺が15cm の正方形の周の長さは？</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q2" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">68</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q2" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">64</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q2" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">60</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q2" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">52</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">3. 次の計算をしなさい: 2 × (29 ÷ 9) = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q3" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">6</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q3" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">8</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q3" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">9</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q3" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">4</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">4. 500円を出して291円の品物を買いました。おつりはいくらですか。</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q4" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">159円</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q4" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">179円</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q4" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">239円</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q4" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">209円</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">5. 6 m は何 cm ですか。</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q5" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">600</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q5" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">580</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q5" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">650</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q5" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">550</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">6. 2 L 696 mL を mL で表すと？</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q6" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">2496</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q6" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">2796</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q6" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">2696</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q6" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">2896</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">7. 50円玉を7枚集めると、合計はいくらですか。</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q7" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">250円</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q7" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">450円</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q7" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">350円</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q7" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">300円</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">8. 商とあまりを求めなさい: 154 ÷ 4 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q8" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">41余り0</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q8" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">41余り3</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q8" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">35余り3</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q8" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">38余り2</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">9. 縦11cm、横8cm の長方形の面積は？</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q9" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">88</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q9" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">78</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q9" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">83</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q9" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">93</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">10. 4 L 499 mL を mL で表すと？</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q10" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">4699</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q10" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">4599</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q10" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">4499</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q10" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">4299</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">11. 次の計算をしなさい: 711 ÷ 9 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q11" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">81</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q11" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">76</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q11" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">82</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q11" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">79</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">12. 次の計算をしなさい: 7 × (27 ÷ 2) = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q12" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">94</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q12" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">88</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q12" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">93</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q12" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">91</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">13. 次の計算をしなさい: 452 × 6 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q13" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">2742</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q13" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">2712</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q13" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">2682</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q13" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">2692</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">14. 次の計算をしなさい: 916 - 801 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q14" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">119</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q14" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">124</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q14" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">115</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q14" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">129</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">15. 2時間28分 は何分ですか。</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q15" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">138</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q15" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">163</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q15" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">133</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q15" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">148</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">16. 3 L 475 mL を mL で表すと？</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q16" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">3375</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q16" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">3275</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q16" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">3475</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q16" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">3675</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">17. 次の計算をしなさい: 494 × 6 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q17" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">2934</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q17" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">3014</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q17" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">2964</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q17" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">2984</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">18. 次の計算をしなさい: 945 × 7 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q18" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">6565</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q18" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">6635</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q18" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">6595</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q18" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">6615</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">19. 7時05分 の 50分後 は何時何分ですか。</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q19" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">7時45分</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q19" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">7時55分</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q19" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">8時05分</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q19" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">8時00分</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">20. 次の計算をしなさい: 186 ÷ 2 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q20" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">88</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q20" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">93</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q20" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">96</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q20" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">95</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">21. 一辺が18cm の正方形の周の長さは？</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q21" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">80</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q21" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">68</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q21" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">72</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q21" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">64</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">22. 次の計算をしなさい: 603 - 408 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q22" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">211</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q22" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">195</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q22" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">176</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q22" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">181</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">23. 5時20分 の 50分後 は何時何分ですか。</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q23" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">6時10分</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q23" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">6時20分</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q23" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">6時05分</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q23" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">6時00分</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">24. 一辺が14cm の正方形の周の長さは？</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q24" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">56</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q24" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">64</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q24" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">52</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q24" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">60</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">25. 次の計算をしなさい: 7 × (14 ÷ 8) = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q25" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">9</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q25" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">4</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q25" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">7</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q25" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">5</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">26. 商とあまりを求めなさい: 299 ÷ 5 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q26" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">59余り4</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q26" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">61余り1</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q26" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">57余り0</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q26" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">56余り4</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">27. 5時45分 の 45分後 は何時何分ですか。</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q27" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">6時30分</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q27" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">6時20分</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q27" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">6時40分</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q27" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">6時25分</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">28. 縦14cm、横11cm の長方形の面積は？</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q28" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">164</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q28" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">154</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q28" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">144</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q28" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">159</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">29. 次の計算をしなさい: 372 + 465 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q29" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">832</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q29" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">817</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q29" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">821</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q29" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">837</span>
          </label>
          
        </div>
      </div>
      
      <div class="question">
        <div class="question-title">30. 次の計算をしなさい: 338 × 8 = ?</div>
        <div class="options">
          
          <label class="option-label">
            <input type="radio" name="q30" value="A">
            <span class="opt-prefix">A.</span>
            <span class="opt-content">2704</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q30" value="B">
            <span class="opt-prefix">B.</span>
            <span class="opt-content">2684</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q30" value="C">
            <span class="opt-prefix">C.</span>
            <span class="opt-content">2734</span>
          </label>
          
          <label class="option-label">
            <input type="radio" name="q30" value="D">
            <span class="opt-prefix">D.</span>
            <span class="opt-content">2654</span>
          </label>
          
        </div>
      </div>
      
      <button type="button" onclick="gradeQuiz()">提出する</button>
    </form>
    <div id="result"></div>
  </div>

  <div id="score-popup">
    <div style="display:flex; justify-content: space-between; align-items: center;">
      <h4>過去の成績</h4>
      <button onclick="this.parentNode.parentNode.remove()">✖</button>
    </div>
    <hr style="margin:10px 0; border:none; border-top:1px solid #ccc">
    <div id="score-log" style="line-height:1.6">読み込み中...</div>
  </div>

  <script>
  const answers = [
    
    { num: 1, answer: 'C', correct: `31余り7`, question: `商とあまりを求めなさい: 255 ÷ 8 = ?` },
    
    { num: 2, answer: 'C', correct: `60`, question: `一辺が15cm の正方形の周の長さは？` },
    
    { num: 3, answer: 'A', correct: `6`, question: `次の計算をしなさい: 2 × (29 ÷ 9) = ?` },
    
    { num: 4, answer: 'D', correct: `209円`, question: `500円を出して291円の品物を買いました。おつりはいくらですか。` },
    
    { num: 5, answer: 'A', correct: `600`, question: `6 m は何 cm ですか。` },
    
    { num: 6, answer: 'C', correct: `2696`, question: `2 L 696 mL を mL で表すと？` },
    
    { num: 7, answer: 'C', correct: `350円`, question: `50円玉を7枚集めると、合計はいくらですか。` },
    
    { num: 8, answer: 'D', correct: `38余り2`, question: `商とあまりを求めなさい: 154 ÷ 4 = ?` },
    
    { num: 9, answer: 'A', correct: `88`, question: `縦11cm、横8cm の長方形の面積は？` },
    
    { num: 10, answer: 'C', correct: `4499`, question: `4 L 499 mL を mL で表すと？` },
    
    { num: 11, answer: 'D', correct: `79`, question: `次の計算をしなさい: 711 ÷ 9 = ?` },
    
    { num: 12, answer: 'D', correct: `91`, question: `次の計算をしなさい: 7 × (27 ÷ 2) = ?` },
    
    { num: 13, answer: 'B', correct: `2712`, question: `次の計算をしなさい: 452 × 6 = ?` },
    
    { num: 14, answer: 'C', correct: `115`, question: `次の計算をしなさい: 916 - 801 = ?` },
    
    { num: 15, answer: 'D', correct: `148`, question: `2時間28分 は何分ですか。` },
    
    { num: 16, answer: 'C', correct: `3475`, question: `3 L 475 mL を mL で表すと？` },
    
    { num: 17, answer: 'C', correct: `2964`, question: `次の計算をしなさい: 494 × 6 = ?` },
    
    { num: 18, answer: 'D', correct: `6615`, question: `次の計算をしなさい: 945 × 7 = ?` },
    
    { num: 19, answer: 'B', correct: `7時55分`, question: `7時05分 の 50分後 は何時何分ですか。` },
    
    { num: 20, answer: 'B', correct: `93`, question: `次の計算をしなさい: 186 ÷ 2 = ?` },
    
    { num: 21, answer: 'C', correct: `72`, question: `一辺が18cm の正方形の周の長さは？` },
    
    { num: 22, answer: 'B', correct: `195`, question: `次の計算をしなさい: 603 - 408 = ?` },
    
    { num: 23, answer: 'A', correct: `6時10分`, question: `5時20分 の 50分後 は何時何分ですか。` },
    
    { num: 24, answer: 'A', correct: `56`, question: `一辺が14cm の正方形の周の長さは？` },
    
    { num: 25, answer: 'C', correct: `7`, question: `次の計算をしなさい: 7 × (14 ÷ 8) = ?` },
    
    { num: 26, answer: 'A', correct: `59余り4`, question: `商とあまりを求めなさい: 299 ÷ 5 = ?` },
    
    { num: 27, answer: 'A', correct: `6時30分`, question: `5時45分 の 45分後 は何時何分ですか。` },
    
    { num: 28, answer: 'B', correct: `154`, question: `縦14cm、横11cm の長方形の面積は？` },
    
    { num: 29, answer: 'D', correct: `837`, question: `次の計算をしなさい: 372 + 465 = ?` },
    
    { num: 30, answer: 'A', correct: `2704`, question: `次の計算をしなさい: 338 × 8 = ?` },
    
  ];

  function gradeQuiz() {
    let score = 0;
    const wrongAnswers = [];

    document.querySelectorAll(".feedback").forEach(el => el.remove());

    answers.forEach(a => {
      const questionDiv = document.querySelectorAll(".question")[a.num - 1];
      const selectedInput = document.querySelector(`input[name='q${a.num}']:checked`);
      const allOptions = questionDiv.querySelectorAll("label.option-label");

      allOptions.forEach(label => label.classList.remove("selected"));

      const optionTexts = Array.from(
        questionDiv.querySelectorAll("label.option-label .opt-content")
      ).map(el => el.innerText);

      if (selectedInput) {
        const selectedLabel = selectedInput.closest("label");
        selectedLabel.classList.add("selected");

        const selectedLetter = selectedInput.value;
        const selectedText = selectedLabel.querySelector(".opt-content")?.innerText || "未選択";

        if (selectedLetter === a.answer) {
          score++;
        } else {
          const fb = document.createElement("div");
          fb.className = "feedback";
          fb.innerHTML = `正解は：<span class='incorrect'>${a.answer}. ${a.correct}</span>`;
          questionDiv.appendChild(fb);

          wrongAnswers.push({
            q: a.question,
            correct: a.correct,
            options: optionTexts,
            wrong_answer: selectedText,
            date: new Date().toISOString()
          });
        }
      } else {
        // No selection
        const fb = document.createElement("div");
        fb.className = "feedback";
        fb.innerHTML = `正解は：<span class='incorrect'>${a.answer}. ${a.correct}</span>`;
        questionDiv.appendChild(fb);

        wrongAnswers.push({
          q: a.question,
          correct: a.correct,
          options: optionTexts,
          wrong_answer: "未選択",
          date: new Date().toISOString()
        });
      }
    });

    document.getElementById("result").innerText = `あなたの得点：${score} / ${answers.length}`;

    // Save score
    const key = location.pathname.split('/').pop() || 'default';
    const scoreStorageURL = 'https://kvdb.io/FrFWQafq3LwK1bVEhs4ER6/' + key;
    const scoreEntry = {
      score: `${score} / ${answers.length}`,
      timestamp: new Date().toISOString()
    };
    fetch(scoreStorageURL)
      .then(r => r.ok ? r.text() : "[]")
      .then(t => {
        let data = [];
        try { data = JSON.parse(t); if (!Array.isArray(data)) data = []; } catch (e) { data = []; }
        data.push(scoreEntry);
        return fetch(scoreStorageURL, {
          method: "PUT",
          body: JSON.stringify(data)
        });
      });

    // Save wrong questions in quiz-compatible format
    if (wrongAnswers.length > 0) {
      const wrongURL = "https://kvdb.io/WitRtAw6rrzZQtarR3gDoW/" + key + "_wrong";
      fetch(wrongURL)
        .then(r => r.ok ? r.text() : "[]")
        .then(t => {
          let data = [];
          try { data = JSON.parse(t); if (!Array.isArray(data)) data = []; } catch (e) { data = []; }
          data.push(...wrongAnswers);
          return fetch(wrongURL, {
            method: "PUT",
            body: JSON.stringify(data)
          });
        });
    }
  }

  // Style selection on load
  window.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll(".options").forEach(group => {
      group.querySelectorAll("input[type='radio']").forEach(input => {
        input.addEventListener("change", () => {
          group.querySelectorAll("label.option-label").forEach(label => {
            label.classList.remove("selected");
          });
          input.closest("label").classList.add("selected");
        });
      });
    });

    // Load past scores
    const key = location.pathname.split('/').pop() || 'default';
    const storageURL = 'https://kvdb.io/FrFWQafq3LwK1bVEhs4ER6/' + key;
    fetch(storageURL)
      .then(res => res.text())
      .then(t => {
        let entries = JSON.parse(t);
        if (!Array.isArray(entries)) entries = [entries];
        const sorted = entries.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
        const log = document.getElementById("score-log");
        log.innerHTML = `<table style="width:100%; border-collapse: collapse;">
          ${sorted.map(e => `
            <tr><td style="padding:6px 4px;"><strong>得点</strong></td><td style="padding:6px 4px;">${e.score}</td></tr>
            <tr><td style="padding:6px 4px;"><strong>時刻</strong></td><td style="padding:6px 4px;">${new Date(e.timestamp).toLocaleString()}</td></tr>
            <tr><td colspan="2"><hr style='border:none;border-top:1px solid #ddd;'></td></tr>
          `).join("")}
        </table>`;
      })
      .catch(() => {
        document.getElementById("score-log").innerText = "記録なし";
      });
  });
</script>


</body>
</html>